<div class="w-full flex justify-center">
    <div class="p-3 bg-white w-90" >
        <h1 class="text-center mb-6">Admin Login</h1>
        <form id="form" class="text-sm ">
            <div class="flex flex-col mb-5">
                <label for="" class="mb-2">Username</label>
                <input type="text" name="username" class="outline-none bg-slate-200 text-xs p-2" placeholder="Masukkan username">
            </div>
            <div class="flex flex-col mb-5">
                <label for="" class="mb-2">Password</label>
                <input type="password" name="password" class="outline-none bg-slate-200 text-xs p-2" placeholder="Masukkan password">
            </div>
            <button type="submit" class="w-full bg-blue-500 text-white py-2 rounded-sm hover:bg-blue-700 transition">Login</button>
            <div class="w-full text-center mt-3">
                <button><a href="/login" class="text-xs text-center underline text-blue-500">Masuk Sebagai TPS</a></button>
            </div>
        </form>
    </div>
</div>
<script>
document.getElementById("form").addEventListener("submit", async (e)=>{
    e.preventDefault();
    const formData = new FormData(e.target);
    const username = formData.get("username");
    const password = formData.get("password");
    
    const response = await fetch("/admin/login", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({username , password})
    });
    const result = await response.json();
    if(result.result){
        window.location.href = `/admin/dashboard`;
    } else {
        Swal.fire(
            'Gagal!',
            result.message,
            'error'
        )
    }
});
</script>