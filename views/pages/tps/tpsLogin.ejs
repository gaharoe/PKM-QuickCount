<div class="w-full flex justify-center">
    <div class="p-3 bg-white w-90" >
        <h1 class="text-center mb-6">Akses TPS</h1>
        <form id="form" class="text-sm">
            <div class="flex flex-col mb-5">
                <label for="" class="mb-2">TPS Tersedia</label>
                <select name="tps" class="outline-none bg-slate-200 text-xs p-2">
                    <option value="0">-- Pilih TPS --</option>
                    <% tps.forEach(t => { %>
                    <option value="<%= t %>"><%= t %></option>
                    <% }) %>
                </select>
            </div>
            <div class="flex flex-col mb-5">
                <label for="" class="mb-2">Nomor Token TPS</label>
                <input type="number" name="password" class="outline-none bg-slate-200 text-xs p-2" placeholder="Masukkan password TPS">
            </div>
            <button type="submit" class="w-full bg-blue-500 text-white py-2 rounded-sm hover:bg-blue-700 transition">Masuk TPS</button>
            </form>
    </div>
</div>
<script>
document.getElementById("form").addEventListener("submit", async (e)=>{
    e.preventDefault();
    const formData = new FormData(e.target);
    const tps = formData.get("tps");
    const password = formData.get("password");
    
    const response = await fetch("/tps/login", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({tps: tps, token: password})
    });
    const result = await response.json();
    if(result.result){
        window.location.href = `/TPS/vote`;
    } else {
        Swal.fire(
            'Gagal!',
            'TPS atau token salah.',
            'error'
        )
    }
});
</script>