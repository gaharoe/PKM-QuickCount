<div class="w-full flex flex-col items-center justify-center">
    <div class="flex flex-wrap gap-6 w-full max-w-6xl px-4">
        <% for(let id in candidate) { %>
            <div class="bg-white rounded-lg shadow-md flex flex-col overflow-hidden">
                <img src="<%=candidate[id].foto%>" alt="Candidate Photo" class="min-w-64 w-64  h-70 object-cover">
                <div class="p-3">
                    <p class="rounded-full w-fit text-xs bg-emerald-600 text-white px-3"><%=id%></p>
                    <h2 class="text-lg font-semibold"><%=candidate[id].nama%></h2>
                    <p class="text-gray-600 text-sm mb-5"><%=candidate[id].kelas%></p>
                    <button onclick="voteCandidate('<%=id%>')" class="bg-blue-400  px-4 py-1 rounded-sm text-white hover:bg-blue-600 transition">Vote</button>
                </div>
            </div>
        <% } %>
    </div>
</div>
<script>

    const tpsID = "<%=tpsID%>";
    function voteCandidate(candidateID){
        Swal.fire({
            title: 'Anda yakin?',
            text: "Anda akan memilih " + candidateID,
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Ya, vote!'
        }).then((result) => {
            if (result.isConfirmed) {
                socket.emit("tps-vote", {candidateID: candidateID}, (response)=>{
                    if(response.result == 1){
                        Swal.fire(
                            'Voted!',
                            'Your vote has been recorded.',
                            'success'
                        )
                    } else if(response.result == 0){
                        Swal.fire(
                            'Error!',
                            'You have already voted.',
                            'error'
                        )
                    } else {
                        Swal.fire(
                            'Error!',
                            'An unknown error occurred.',
                            'error'
                        )
                    }
                });
            }
        });
    }
</script>